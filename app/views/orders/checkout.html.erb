<div class="my-container">
  <%= link_to "All my orders", orders_path, class: "btn-main" %>
</div>

<div class="basket-container">

  <div class="basket-card">
    <% total_price = 0 %>

    <h2>Order Summary:</h2>
    <ul>
      <% @order.order_products.each do |order_product| %>
        <% inventory = Inventory.find_by(product_id: order_product.product_id, van_id: @order.van_id) %>

        <% if inventory %>
          <% total_price += inventory.price * order_product.quantity_ordered %>
        <% end %>

        <% if inventory %>
          <li>
            <strong><%= order_product.quantity_ordered %>x</strong>
            <strong><%= order_product.product.name %></strong>
            <strong>£<%= inventory.price * order_product.quantity_ordered %></strong>
          </li>
        <% end %>
      <% end %>
    </ul>
    <div>
      <hr class="product-line">
      <h3><strong>Total £<%= total_price %></strong></h3>
    </div>
  </div>

  <div class="basket-checkout">
    <form>
      <div class="payment-form">
        <label>Credit Card Number:</label>
        <input type="text" class="form-control" placeholder="Enter card number" required>

        <label>CVC:</label>
        <input type="text" class="form-control" placeholder="Enter CVC" required>

        <label>Post Code:</label>
        <input type="text" class="form-control" placeholder="Enter Post Code" required>

        <label>Expiry Date:</label>
        <div class="expiry-date">
          <select class="form-control">
            <% (1..12).each do |month| %>
              <option value="<%= month %>"><%= Date::MONTHNAMES[month] %></option>
            <% end %>
          </select>
          <select class="form-control">
            <% (Date.today.year..(Date.today.year + 10)).each do |year| %>
              <option value="<%= year %>"><%= year %></option>
            <% end %>
          </select>
        </div>

        <button type="submit" class="btn-main">Checkout</button>
      </div>
    </form>
  </div>

</div>
